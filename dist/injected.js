(()=>{function handleGetPageInfo(){var e={url:window.location.href,title:document.title,frameworks:detectFrameworks(),forms:getFormInfo(),buttons:getButtonInfo(),links:getLinkInfo()};window.postMessage({type:"PAGE_INFO_RESPONSE",data:e},"*")}function detectFrameworks(){var e=[];return(window.React||document.querySelector("[data-reactroot]")||document.querySelector("[data-react-checksum]"))&&e.push("React"),(window.Vue||document.querySelector("[data-v-]"))&&e.push("Vue"),(window.angular||document.querySelector("[ng-app]")||document.querySelector("[data-ng-app]"))&&e.push("Angular"),(window.jQuery||window.$)&&e.push("jQuery"),e}function getFormInfo(){return Array.from(document.forms).map(function(e){return{id:e.id,name:e.name,action:e.action,method:e.method,fields:Array.from(e.elements).map(function(e){return{name:e.name,type:e.type,id:e.id,required:e.required}})}})}function getButtonInfo(){return Array.from(document.querySelectorAll('button, input[type="button"], input[type="submit"]')).map(function(e){var t;return{id:e.id,text:(null===(t=e.textContent)||void 0===t?void 0:t.trim())||e.value,type:e.type||"button",className:e.className}})}function getLinkInfo(){return Array.from(document.querySelectorAll("a[href]")).map(function(e){var t;return{href:e.href,text:null===(t=e.textContent)||void 0===t?void 0:t.trim(),id:e.id,className:e.className}})}function handleExecuteScript(scriptData){try{scriptData.code&&eval(scriptData.code),window.postMessage({type:"SCRIPT_EXECUTION_RESPONSE",data:{success:!0}},"*")}catch(e){window.postMessage({type:"SCRIPT_EXECUTION_RESPONSE",data:{success:!1,error:e instanceof Error?e.message:"Unknown error"}},"*")}}window.addEventListener("message",function(e){if(e.source===window){var t=e.data;switch(t.type){case"GET_PAGE_INFO":handleGetPageInfo();break;case"EXECUTE_SCRIPT":handleExecuteScript(t.data)}}}),window.postMessage({type:"INJECTED_SCRIPT_READY"},"*")})();